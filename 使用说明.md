# 机器人数据导入工具 - 使用说明

## 程序功能

这个Java程序可以自动处理您的机器人数据，包括：

1. **读取Excel文件**：从每个文件夹的Excel文件中读取用户昵称和姓名
2. **扫描图片文件**：从TX文件夹获取头像，从XC文件夹获取相册图片
3. **分配图片**：为每个用户随机分配一个头像和3-5张相册图片
4. **生成SQL**：生成可以直接导入到您数据库的SQL脚本

## 您的数据表结构

程序已经配置为适配您的数据表：

- **joy_profile**：用户信息表
- **joy_photo**：照片表

## 快速开始

### 1. 确保环境
- 安装Java 8或更高版本
- 安装Maven 3.6或更高版本

### 2. 运行程序
```bash
# 方法1：使用测试脚本
chmod +x test_run.sh
./test_run.sh

# 方法2：直接使用Maven
mvn clean compile
mvn exec:java -Dexec.mainClass="RobotDataImporter"
```

### 3. 查看结果
程序运行完成后会生成：
- `robot_import_script.sql`：包含所有INSERT语句的SQL文件
- 控制台输出：显示处理进度和分配结果

## 生成的SQL示例

```sql
-- 用户信息
INSERT INTO joy_profile (user_id, open_id, nick_name, avatar, status) 
VALUES (1000001, 'robot_1703123456789_1000001', '用户昵称', '头像文件.jpg', 1);

-- 相册图片
INSERT INTO joy_photo (id, user_id, album_id, title, url, status) 
VALUES (2000001, 1000001, 3000001, '相册图片', '图片文件.jpg', 1);
```

## 配置选项

在 `config.properties` 文件中可以修改：

```properties
# 数据目录路径
data.base.path=/Users/zty/Downloads/机器人

# 每个用户的相册图片数量范围
album.count.min=3
album.count.max=5

# 输出SQL文件名
output.sql.file=robot_import_script.sql
```

## 注意事项

1. **图片分配**：程序会随机分配图片，确保每个文件夹内不重复使用
2. **ID生成**：程序会自动生成唯一的用户ID、照片ID等
3. **数据完整性**：生成的SQL语句只包含必要字段，其他字段使用数据库默认值
4. **状态设置**：所有记录的状态都设置为1（正常状态）
5. **默认值**：robot_id、create_time、update_time等字段使用数据库默认值

## 故障排除

如果遇到问题：

1. **编译错误**：检查Java和Maven版本
2. **文件找不到**：检查数据目录路径是否正确
3. **Excel读取错误**：确保Excel文件格式正确（第1列昵称，第2列姓名）
4. **图片分配不足**：检查图片文件数量是否足够

## 输出文件说明

- `robot_import_script.sql`：可以直接在数据库中执行的SQL脚本
- `database_schema.sql`：数据表结构参考
- 控制台输出：详细的处理日志和分配结果 